{"version":3,"file":"main.js","mappings":"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","sources":["webpack://InfectionGame/./source/events.js","webpack://InfectionGame/./source/fluid.js","webpack://InfectionGame/./source/fps.js","webpack://InfectionGame/./source/game.js","webpack://InfectionGame/./source/mathUtils.js","webpack://InfectionGame/./source/populationGraph.js","webpack://InfectionGame/./source/probe.js","webpack://InfectionGame/./source/species/bacteria.js","webpack://InfectionGame/./source/species/neurons.js","webpack://InfectionGame/./source/statsDisplay.js","webpack://InfectionGame/./source/substance.js","webpack://InfectionGame/./source/timer.js","webpack://InfectionGame/./source/viewport.js","webpack://InfectionGame/./source/world.js","webpack://InfectionGame/webpack/bootstrap","webpack://InfectionGame/webpack/runtime/define property getters","webpack://InfectionGame/webpack/runtime/hasOwnProperty shorthand","webpack://InfectionGame/webpack/runtime/make namespace object","webpack://InfectionGame/./source/main.js"],"sourcesContent":["export class Events {\n\n    constructor() {\n        this.queue = [];\n    }\n\n    initialize(canvas) {\n        window.addEventListener('resize', (e) => this.onWindowResize(e));\n        window.addEventListener('keypress', (e) => this.onWindowKeypress(e));\n        canvas.addEventListener('click', (e) => this.onMouseClick(e));\n        canvas.addEventListener('mousemove', (e) => this.onMouseMove(e));\n        this.enqueueResizeEvent(window.innerWidth, window.innerHeight);\n    }\n\n    onMouseMove(e) {\n        this.enqueueMouseMoveEvent(e);\n    }\n\n    onWindowResize(e) {\n        this.enqueueResizeEvent(e.target.innerWidth, e.target.innerHeight);\n    }\n\n    onWindowKeypress(e) {\n        if (e.code === 'Space')\n            this.enqueueTogglePauseEvent();\n    }\n\n    onMouseClick(e) {\n        this.enqueueMouseClickEvent(e);\n    }\n\n    enqueueTogglePauseEvent() {\n        this.queue.push({type: 'pause'});\n    }\n\n    enqueueResizeEvent(newWidth, newHeight) {\n        this.queue.push(\n            { type: 'resize', width: newWidth, height: newHeight }\n        );\n    }\n\n    enqueueTickEvent(timeDiff) {\n        this.queue.push(\n            { type: 'tick', timeDiff: timeDiff }\n        );\n    }\n\n    enqueueFrameEvent(timeDiff) {\n        this.queue.push(\n            {type: 'frame', timeDiff: timeDiff}\n        );\n    }\n\n    enqueueMouseClickEvent(e) {\n        this.queue.push({type: 'click', x : e.clientX, y: e.clientY});\n    }\n\n    enqueueMouseMoveEvent(e) {\n        this.queue.push({type: 'move', x: e.clientX, y: e.clientY});\n    }\n\n    onResize(callback) {\n        this.invoke('resize', callback);\n    }\n\n    onTick(callback) {\n        this.invoke('tick', callback);\n    }\n\n    onFrame(callback) {\n        this.invoke('frame', callback);\n    }\n\n    onTogglePause(callback) {\n        this.invoke('pause', callback);\n    }\n\n    onClick(callback) {\n      this.invoke('click', callback);\n    }\n\n    onMove(callback) {\n        this.invoke('move', callback);\n    }\n\n    invoke(eventType, handler) {\n        const events = this.queue.filter(e => e.type === eventType);\n        for (let event of events)\n            handler(event);\n    }\n\n    clear() {\n        this.queue = [];\n    }\n}","import {Substance} from './substance';\nimport {MathUtils} from './mathUtils';\n\nexport class Fluid {\n    constructor() {\n        this.substances = [];\n    }\n\n    update(game) {\n        for (let substance of this.substances)\n            substance.update(game);\n    }\n\n    render(game) {\n        const {context, viewport} = game;\n        context.save();\n        \n        let clipRect = new Path2D();\n        clipRect.rect(viewport.left, viewport.top, viewport.width, viewport.height);\n        context.clip(clipRect);\n\n        for (let substance of this.substances)\n            substance.render(game);\n\n        context.restore();\n    }\n\n    addSubstance(x, y, amount) {\n        this.substances.push(new Substance(x, y, amount));\n    }\n\n    removeSubstance(substance) {\n        this.substances = this.substances.filter((s) => s !== substance);\n    }\n\n    consumeSubstancesAt(game, x, y) {\n        return this.substances\n            .map(s => this.consumeSubstanceAt(game, s, x, y))\n            .reduce((a, b) => a + b, 0);\n    }\n\n    consumeSubstanceAt(game, substance, x, y) {\n        const amount = this.getConcentration(substance, x, y);\n        substance.subtract(game, amount);\n        return amount;\n    }\n\n    getConcentration(substance, x, y) {\n        if (substance.area <= 0) return 0;\n        const  dist = MathUtils.dist(x, substance.x, y, substance.y);\n        if (dist > substance.area) return 0;\n        return substance.concentration;\n    }\n\n    getTotalConcentration(x, y) {\n        return this.substances\n            .map(s => this.getConcentration(s, x, y))\n            .reduce((a, b) => a + b, 0);\n    }\n}","export class FPS {\n    \n    constructor() {\n        this.fps = 0;\n        this.frames = 0;\n    }\n\n    update(game) {\n        this.frames+=1;\n        game.events.onTick((e) => this.updateFps(e.timeDiff));\n    }   \n\n    updateFps(timeDiff) {\n        this.fps = Math.ceil((1000 / timeDiff) * this.frames);\n        this.frames = 0;\n    }\n\n    render(game) {\n        const {context} = game;\n\n        context.fillStyle = 'black';\n        context.font = '10px sans-serif';\n        context.fillText('FPS: ' + this.fps, 3, 10);\n    } \n}","import {Viewport} from './viewport';\nimport {Events} from './events';\nimport {FPS} from './fps';\nimport {World} from './world';\nimport {Timer} from './timer';\nimport {Probe} from './probe';\nimport {StatsDisplay} from './statsDisplay';\nimport {PopulationGraph} from './populationGraph';\n\nexport class Game {\n\n    constructor(canvas) {\n        this.events = new Events();\n        this.canvas = canvas;\n        this.context = this.canvas.getContext('2d');\n        this.viewport = new Viewport();\n        this.world = new World();\n        this.timer = new Timer();\n        this.fps = new FPS();\n        this.probe = new Probe();\n        this.populationGraph = new PopulationGraph();\n        this.statsDisplay = new StatsDisplay();\n        this.paused = false;\n    }\n\n    initialize() {\n        this.events.initialize(this.canvas);\n        this.nextFrame();\n    }\n\n    run() {\n        this.update();\n        this.render();\n        this.nextFrame();\n    }\n\n    update() {\n        this.events.onTogglePause(() => this.paused = !this.paused);\n        this.viewport.update(this);\n        this.timer.update(this);\n        this.fps.update(this);\n        this.world.update(this);\n        this.populationGraph.update(this);\n        this.probe.update(this);\n        this.statsDisplay.update(this);\n        this.events.clear();\n    }\n\n    render() {\n        this.viewport.render(this);\n        this.timer.render(this);\n        this.world.render(this);\n        this.fps.render(this);\n        this.populationGraph.render(this);\n        this.probe.render(this);\n        this.statsDisplay.render(this);\n    }\n\n    nextFrame() {\n        window.requestAnimationFrame(() => this.run());\n    }\n}","export class MathUtils {\n\n    static dist(x1, x2, y1, y2) {\n        const dx = x2 - x1;\n        const dy = y2 - y1;\n        //return 1 / Q_rsqrt(dx * dx + dy * dy);\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n    \n\n}\n\nfunction Q_rsqrt(number)\n{ \n    var i;\n    var x2, y;\n    const threehalfs = 1.5;\n  \n    x2 = number * 0.5;\n    y = number;\n    var buf = new ArrayBuffer(4);\n    (new Float32Array(buf))[0] = number;\n    i =  (new Uint32Array(buf))[0];\n    i = (0x5f3759df - (i >> 1)); //What the fuck?\n    (new Uint32Array(buf))[0] = i;\n    y = (new Float32Array(buf))[0];\n    y  = y * ( threehalfs - ( x2 * y * y ) );   // 1st iteration\n\n    return y;\n}","export class PopulationGraph {\n    constructor() {\n        this.points = [];\n        this.maxPoints = 100;\n        this.width = 200;\n        this.height = 40;\n        this.top = 15;\n        this.left = 3;\n    }\n\n    update(game) {\n        const {events} = game;\n        events.onFrame(() => this.updateGraph(game.world));\n    }\n\n    updateGraph(world) {\n        this.points.push(world.species.length);\n        if (this.points.length > this.maxPoints)\n            this.points.shift();\n    }\n\n    render(game) {\n        const {context} = game;\n\n        const maxValue = Math.max(...this.points);\n        const minValue = Math.min(...this.points);\n        const avgValue = this.points.reduce((a, b) => a + b, 0) / this.points.length;\n        const vScale = this.height / (maxValue - minValue);\n        const hScale = this.width / this.maxPoints;\n        const bottom = this.top + this.height;\n\n        context.font = '8px sans-serif';\n        context.fillStyle = 'rgba(0, 0, 0, 0.5)';\n        context.fillText(maxValue, this.left + 1, this.top + 10);\n        context.fillText(minValue, this.left + 1, bottom - 2);\n        context.fillText(Math.ceil(avgValue), this.left + 1, this.top + this.height / 2 + 4);\n\n        context.beginPath();\n        for (let i = 0; i < this.points.length; i++)\n        {\n            context.moveTo(this.left + i * hScale, bottom);\n            context.lineTo(this.left + i * hScale, bottom - (this.points[i] - minValue) * vScale);\n        }\n        context.strokeStyle = 'rgba(0, 0, 0, 0.2)';\n        context.stroke();\n    }\n}","export class Probe {\n    constructor() {\n        this.x = 0;\n        this.y = 0;\n        this.location = {x:0, y:0};\n        this.enabled = false;\n    }\n\n    update(game) {\n        if (!this.enabled) return;\n        \n        this.concentration = this.getConcentration(game).toFixed(4);\n        game.events.onMove(e => {\n            if (!game.viewport.contains(e.x, e.y)) return;\n            this.x = e.x;\n            this.y = e.y;\n            this.location = game.world.toGame(game, this.x, this.y);\n        });\n    }\n\n    render(game) {\n        if (!this.enabled) return;\n\n        const {context} = game;\n        context.fillStyle = 'rgba(0, 0, 0, 0.5)';\n        context.fillText(this.concentration, this.x + 2, this.y - 2);\n        context.strokeStyle = 'black';\n        context.beginPath();\n        context.moveTo(this.x, this.y - 5);\n        context.lineTo(this.x, this.y + 5);\n        context.moveTo(this.x - 5, this.y);\n        context.lineTo(this.x + 5, this.y);\n        context.stroke();\n    }\n\n    getConcentration(game) {\n        const {x,y} = this.location;\n        return game.world.fluid.getTotalConcentration(x, y);\n    }\n}","import {RandomMovementNeuron, LeftMovementNeuron} from './neurons';\n\nexport class Bacteria {\n\n    constructor(x, y, generation) {\n        this.x = x;\n        this.y = y;\n        this.age = 0;\n        this.isSelected = false;\n        this.lifetime = 1 + Math.ceil(Math.random() * 10);\n        this.reproductionAge = 5;\n        this.movementNeuron = new RandomMovementNeuron();\n        this.regenerationRate = 0.0001;\n        this.poisonConsumed = 0;\n        this.maxPoisoning = 6;\n        this.generation = generation;\n    }\n\n    update(game) {\n        const {world, events} = game;\n\n        events.onFrame((e) => { \n            this.updatePosition(world, e.timeDiff); \n            this.consumeSubstance(game);\n        });\n\n        events.onTick((e) => this.heartbeat(game, e.timeDiff));\n    }\n\n    heartbeat(game, timeDiff) {\n        this.updateAge(game.world);\n    }\n    \n    updatePosition(world, timeDiff) {\n        const {x, y} = this.movementNeuron.nextPosition(world, this, timeDiff);\n        this.x = x;\n        this.y = y;\n    }\n\n    updateAge(world) {\n        this.age += 1;\n        if (this.age >= this.lifetime) {\n            this.die(world);\n        } else if (this.age >= this.reproductionAge) {\n            this.reproduce(world);\n        }\n    }\n\n    consumeSubstance(game) {\n        const amount = game.world.fluid.consumeSubstancesAt(game, this.x, this.y);\n        this.poisonConsumed += amount;\n    }\n\n    reproduce(world) {\n        if (world.species.length > world.maxPopulation) return;\n        if (this.poisonConsumed > this.maxPoisoning) return;\n        const offspring1 = new Bacteria(this.x, this.y, this.generation + 1);\n        const offspring2 = new Bacteria(this.x, this.y, this.generation + 1);\n        world.addSpecies(offspring1);\n        world.addSpecies(offspring2);\n        world.removeSpecies(this);\n    }\n\n    die(world) {\n        world.addSubstance(this.x, this.y, 20);\n        world.removeSpecies(this);\n    }\n \n    render(game) {\n        const {context, world} = game;\n\n        const location = world.toScreen(game, this.x, this.y);\n\n        const scaleX = world.getScaleX(game);\n        const scaleY = world.getScaleY(game);\n\n        context.beginPath();\n        context.fillStyle = 'black';\n        if (this.isSelected) context.fillStyle = 'cyan';\n        context.arc(location.x, location.y, scaleX / 2, 0, 2 * Math.PI);\n        context.fill();\n    }\n}","class MovementNeuron {\n    constructor() {\n        this.speed = 10;\n    }\n\n    getDistance(timeDiff) {\n        return (timeDiff / 1000) * this.speed\n    }\n\n    restrict(world, x, y) {\n        if (x < 0) x = 0;\n        if (y < 0) y = 0;\n        if (x >= world.width - 1) x = world.width - 1;\n        if (y >= world.height - 1) y = world.height - 1;\n        return {x, y};\n    }\n}\n\nexport class RandomMovementNeuron extends MovementNeuron {\n\n    constructor() {\n        super();\n        this.direction = Math.random() * 2 * Math.PI;\n    }\n\n    nextPosition(world, bacteria, timeDiff) {\n        this.updateDirection();\n        const distance = this.getDistance(timeDiff);\n        let x = bacteria.x + Math.cos(this.direction) * distance;\n        let y = bacteria.y + Math.sin(this.direction) * distance;\n        return this.restrict(world, x, y);\n    }\n\n    updateDirection() {\n        const changeProb = Math.random();\n        \n        if (changeProb > 0.95)\n            this.direction = Math.random() * 2 * Math.PI;\n        else if (changeProb > 0.5)\n            this.direction += (Math.random() - 0.5) * Math.PI * 0.2;\n    }\n}\n\nexport class LeftMovementNeuron extends MovementNeuron {\n\n    constructor() {\n        super();\n    }\n\n    nextPosition(world, bacteria, timeDiff) {\n        const distance = this.getDistance(timeDiff);\n        return this.restrict(world, bacteria.x - distance, bacteria.y);\n    }\n}","export class StatsDisplay {\n    constructor() {\n        this.left = 2;\n        this.top = 70 ;\n    }\n\n    update(game) {\n    }\n\n    render(game) {\n\n        const {context} = game;\n        let top = this.top;\n\n        context.fillStyle = 'black';\n        context.font = \"10px Arial\";\n        context.textAlign = 'left';\n\n        const generations = game.world.species.map(s => s.generation);\n\n        context.fillText('Species: ' + game.world.species.length, this.left, top);\n\n        if (generations.length)\n        context.fillText('Generations: ' + Math.min(...generations) + '-' + Math.max(...generations), this.left, top += 12);\n\n        const bacteria = game.world.selectedSpecies;\n        if (!game.world.selectedSpecies) return;\n        context.fillText('Age: ' + bacteria.age, this.left, top += 12);\n        context.fillText('Lifetime: ' + bacteria.lifetime, this.left, top += 12);\n        context.fillText('Poisoning: ' + bacteria.poisonConsumed, this.left, top += 12);\n        context.fillText('Generation: ' + bacteria.generation, this.left, top += 12);\n    }\n}","export class Substance {\n\n    constructor(x, y, amount) {\n        this.x = x;\n        this.y = y;\n        this.area = 0.5;\n        this.spreadRate = 0.01;\n        this.dissolveRate = 0.01;\n        this.amount = amount;\n        this.minAmount = 0.01;\n        this.concentrationFactor = this.amount / this.area;\n        this.concentration = this.amount / this.area / this.concentrationFactor;\n    }\n\n    update(game) {\n        game.events.onFrame((e) => this.spread(game, e.timeDiff));\n    }\n\n    spread(game, timeDiff) {\n        if (this.amount <= this.minAmount) {\n            game.world.removeSubstance(this);\n            return;\n        }\n        \n        this.area += this.spreadRate * timeDiff;\n        this.amount -= this.dissolveRate * timeDiff;\n        this.concentration = this.amount / this.area / this.concentrationFactor;\n    }\n\n    subtract(game, amount) {\n        this.amount -= amount;\n        this.concentration = this.amount / this.area / this.concentrationFactor;\n\n        if (this.amount <= this.minAmount) {\n            game.world.removeSubstance(this);\n            return;\n        }\n    }\n\n    render(game) {\n        const {context, world} = game;\n\n        const {x, y} = world.toScreen(game, this.x, this.y);\n        const radius = world.getScaleX(game) * this.area;\n\n        const alpha = this.concentration;\n        context.beginPath();\n        context.arc(x, y, radius, 0, Math.PI * 2);\n        context.fillStyle = `rgba(255, 0, 0, ${alpha})`;\n        context.fill();\n    }\n}","export class Timer {\n    constructor(interval) {\n        this.frameStart = this.tickStart = Date.now();\n        this.interval = interval || 100;\n    }\n\n    update(game) {\n        const now = Date.now();\n\n        if (game.paused) {\n            this.frameStart = now;\n            this.tickStart = now;\n            return;\n        }\n        \n        const frameTime = now - this.frameStart;\n        this.frameStart = now;\n\n        game.events.enqueueFrameEvent(frameTime);\n\n        const tickTime = now - this.tickStart;\n        if (tickTime >= this.interval) {\n            game.events.enqueueTickEvent(tickTime);\n            this.tickStart = now;\n        }\n    }\n\n    render() { }\n}","export class Viewport {\n\n    update(game) {\n        game.events.onResize((e) => this.resize(e));\n    }\n\n    resize(e) {\n        this.canvasWidth = e.width;\n        this.canvasHeight = e.height;\n\n        const minDim = Math.min(e.width, e.height);\n\n        this.width = minDim;\n        this.height = minDim;\n        \n        this.left = this.canvasWidth / 2 - this.width / 2;\n        this.top = this.canvasHeight / 2 - this.height / 2;\n    }\n\n    contains(x, y) {\n        return x >= this.left && \n            x <= this.left + this.width &&\n            y >= this.top &&\n            y <= this.top + this.height;\n    }\n\n    render(game) {\n        const {context} = game;\n        context.canvas.width = this.canvasWidth;\n        context.canvas.height = this.canvasHeight;\n\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n\n        context.beginPath();\n        context.rect(this.left, this.top, this.width, this.height);\n        context.stroke();\n    }\n}","import {Bacteria} from './species/bacteria';\nimport {Fluid} from './fluid';\nimport {MathUtils} from './mathUtils';\n\nexport class World {\n\n    constructor() {\n        this.width = 128;\n        this.height = 128;\n        this.maxPopulation = 2000;\n        this.species = [\n            new Bacteria(64, 64, 0)\n        ];\n        this.fluid = new Fluid();\n    }\n\n    update(game) {\n        this.fluid.update(game);\n        \n        for (let s of this.species)\n            s.update(game);\n\n        game.events.onClick((e) => this.handleClick(e, game));\n    }\n\n    handleClick(e, game) {\n      this.species.forEach(s => s.isSelected = false);\n\n      this.selectedSpecies = this.species.filter(s => this.isClicked(s, e, game))[0];\n      \n       if (this.selectedSpecies) this.selectedSpecies.isSelected = true;\n    }\n\n    isClicked(species, e, game) {\n      const location = this.toScreen(game, species.x, species.y);\n      const dist = MathUtils.dist(location.x, e.x, location.y, e.y);\n      return dist <= this.getScaleX(game);\n    }\n\n    render(game) {\n        this.fluid.render(game);\n        for (let s of this.species)\n            s.render(game);\n    }\n\n    toScreen(game, x, y) {\n        const {viewport} = game;\n        const scaleX = this.getScaleX(game);\n        const scaleY = this.getScaleY(game);\n        return {\n            x: x * scaleX + viewport.left + scaleX / 2,\n            y: y * scaleY + viewport.top + scaleY / 2\n        }\n    }\n\n    toGame(game, x, y) {\n        const {viewport} = game;\n        const scaleX = this.getScaleX(game);\n        const scaleY = this.getScaleY(game);\n        return {\n            x: (x - viewport.left) / scaleX,\n            y: (y - viewport.top) / scaleY\n        }\n    }\n\n    getScaleX(game) {\n        const {viewport} = game;\n        return viewport.width / this.width;\n    }\n\n    getScaleY(game) {\n        const {viewport} = game;\n        return viewport.height / this.height;\n    }\n\n    addSpecies(species) {\n        this.species.push(species);\n    }\n\n    removeSpecies(species) {\n        this.species = this.species.filter(s => s !== species);\n        if (this.selectedSpecies === species) this.selectedSpecies = null;\n    }\n\n    addSubstance(x, y, amount) {\n        this.fluid.addSubstance(x, y, amount);\n    }\n\n    removeSubstance(substance) {\n        this.fluid.removeSubstance(substance);\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {Game} from './game';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const canvas = document.getElementById('viewport');\n    const game = new Game(canvas);\n    game.initialize();\n});"],"names":["Events","queue","canvas","window","addEventListener","e","onWindowResize","onWindowKeypress","onMouseClick","onMouseMove","enqueueResizeEvent","innerWidth","innerHeight","enqueueMouseMoveEvent","target","code","enqueueTogglePauseEvent","enqueueMouseClickEvent","push","type","newWidth","newHeight","width","height","timeDiff","x","clientX","y","clientY","callback","invoke","eventType","handler","events","filter","event","Substance","MathUtils","Fluid","substances","game","substance","update","context","viewport","save","clipRect","Path2D","rect","left","top","clip","render","restore","amount","s","map","consumeSubstanceAt","reduce","a","b","getConcentration","subtract","area","dist","concentration","FPS","fps","frames","onTick","updateFps","Math","ceil","fillStyle","font","fillText","Viewport","World","Timer","Probe","StatsDisplay","PopulationGraph","Game","getContext","world","timer","probe","populationGraph","statsDisplay","paused","initialize","nextFrame","onTogglePause","clear","requestAnimationFrame","run","x1","x2","y1","y2","dx","dy","sqrt","Q_rsqrt","number","i","threehalfs","buf","ArrayBuffer","Float32Array","Uint32Array","points","maxPoints","onFrame","updateGraph","species","length","shift","maxValue","max","minValue","min","avgValue","vScale","hScale","bottom","beginPath","moveTo","lineTo","strokeStyle","stroke","location","enabled","toFixed","onMove","contains","toGame","fluid","getTotalConcentration","RandomMovementNeuron","LeftMovementNeuron","Bacteria","generation","age","isSelected","lifetime","random","reproductionAge","movementNeuron","regenerationRate","poisonConsumed","maxPoisoning","updatePosition","consumeSubstance","heartbeat","updateAge","nextPosition","die","reproduce","consumeSubstancesAt","maxPopulation","offspring1","offspring2","addSpecies","removeSpecies","addSubstance","toScreen","scaleX","getScaleX","scaleY","getScaleY","arc","PI","fill","MovementNeuron","speed","direction","bacteria","updateDirection","distance","getDistance","cos","sin","restrict","changeProb","textAlign","generations","selectedSpecies","spreadRate","dissolveRate","minAmount","concentrationFactor","spread","removeSubstance","radius","alpha","interval","frameStart","tickStart","Date","now","frameTime","enqueueFrameEvent","tickTime","enqueueTickEvent","onResize","resize","canvasWidth","canvasHeight","minDim","clearRect","onClick","handleClick","forEach","isClicked","document","getElementById"],"sourceRoot":""}